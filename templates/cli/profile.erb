<%#
This file is part of the doubledog-koji Puppet module.
Copyright 2016-2018 John Florian
SPDX-License-Identifier: GPL-3.0-or-later
-%>

<% if @title == 'koji' -%>
# Default Profile {{{1
<% else -%>
# '<%= @title %>' Profile {{{1
<% end -%>
[<%= @title %>]

# url of the Koji-Hub
server = <%= @hub %>

# url of the Koji-Web
weburl = <%= @web %>

# url of package download site
topurl = <%= @downloads %>

# path to the koji top directory
topdir = <%= @top_dir %>

## authentication {{{2
authtype = <%= @auth_type %>

<% if @auth_type == 'kerberos' -%>
krb_rdns = false
<% elsif @auth_type == 'ssl' -%>
# client certificate
cert = ~/.koji/client.crt

# certificate of the CA that issued the HTTP server certificate
serverca = ~/.koji/serverca.crt
<% end -%>

## failure handling when making calls to the Koji-Hub {{{2

# How many times should a failed call be retried if the Hub reports
# a temporary failure?
max_retries = <%= @max_retries %>

# ... and if so, wait how many seconds between attempts?
retry_interval = <%= @retry_interval %>

# Should calls be retried if the Hub reports itself offline?
offline_retry = <%= @offline_retry %>

# ... and if so, wait how many seconds between attempts?
offline_retry_interval = <%= @offline_retry_interval %>

# 1}}}
